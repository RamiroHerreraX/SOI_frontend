<app-header-admin></app-header-admin>

<div class="container mt-5 pt-4">
  <h2 class="text-center mb-4">Lista de Contratos Registrados</h2>

  <div *ngIf="cargando" class="text-center">
    <div class="spinner-border" role="status"></div>
    <p class="mt-2">Cargando contratos...</p>
  </div>

  <div *ngIf="!cargando && contratos.length === 0" class="alert alert-warning">
    No hay contratos registrados.
  </div>

  <div *ngIf="contratos.length > 0" class="table-responsive shadow p-3 bg-white rounded">
    <table class="table table-striped table-hover text-center align-middle">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Cliente</th>
          <th>Lote</th>
          <th>Precio Total</th>
          <th>Estado</th>
          <th>Fecha Creaci√≥n</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of contratos">
          <td>{{ c.id_contrato }}</td>
          <td>{{ c.cliente_nombre }}</td>
          <td>{{ c.id_lote }}</td>
          <td>$ {{ c.precio_total }}</td>
          <td>
            <span class="badge bg-success" *ngIf="c.estado_contrato === 'activo'">Activo</span>
            <span class="badge bg-secondary" *ngIf="c.estado_contrato !== 'activo'">Inactivo</span>
          </td>
          <td>{{ c.fecha_creacion | date: 'mediumDate' }}</td>

          <td>
            <button class="btn btn-primary btn-sm me-2" (click)="verDetalles(c)">
              Ver
            </button>

            <button class="btn btn-danger btn-sm" (click)="descargarPDF(c)">
              PDF
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<app-scroll-top></app-scroll-top>

<app-footer-admin></app-footer-admin>
